<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Article — What Matters To You</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Newsreader:opsz,wght@6..72,600;6..72,800&display=swap" rel="stylesheet">
  <script type="module" src="shared.js"></script>
</head>
<body>
  <div id="site-header"></div>
  <main class="container" style="max-width:820px">
    <article id="article"></article>
    <hr style="border:none;border-top:1px solid rgba(70,130,180,.25);margin:2rem 0">
    <section>
      <h3 class="serif">More to explore</h3>
      <div id="more" class="grid"></div>
    </section>
  </main>
  <div id="site-footer"></div>
  <script type="module">
    import { renderHeader, renderFooter } from './shared.js';
    document.getElementById('site-header').innerHTML = renderHeader('articles');
    document.getElementById('site-footer').innerHTML = renderFooter();

    const params = new URLSearchParams(location.search);
    const id = params.get('id');

    const res = await fetch('articles.json');
    const articles = await res.json();
    const art = articles.find(a => a.id === id) || articles[0];

    document.title = art.title + " — What Matters To You";

    const el = document.getElementById('article');
    el.innerHTML = \`
      <p class="kicker">\${art.category}</p>
      <h1 class="serif">\${art.title}</h1>
      <div class="byline">\${art.author} • \${new Date(art.date).toLocaleDateString()}</div>
      <img src="\${art.hero}" alt="" style="width:100%;height:420px;object-fit:cover;border-radius:16px;margin:1rem 0">
      <div class="prose">\${art.content}</div>
      <p class="byline">Tags: \${art.tags.map(t=>`<a href='articles.html?q=${encodeURIComponent(t)}'>#\${t}</a>`).join(' ')}</p>
    \`;

    // More
    const more = document.getElementById('more');
    articles.filter(a=>a.id!==art.id).slice(0,3).forEach(a=>{
      const card = document.createElement('article');
      card.className='card';
      card.innerHTML = \`
        <img src="\${a.hero}" alt="">
        <div class="card-body">
          <span class="badge">\${a.category}</span>
          <h3 class="serif"><a href="article.html?id=\${a.id}">\${a.title}</a></h3>
          <p>\${a.excerpt}</p>
        </div>\`;
      more.appendChild(card);
    });
  </script>
</body>
</html>
